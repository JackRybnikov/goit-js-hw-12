{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const sendRequest = async (search, page, per_page = 15) => {\n    axios.defaults.baseURL = `https://pixabay.com`;\n\n    const response = await axios.get(`/api/?`, {\n        params: {\n            key: \"42388767-1d9ccb99c091176bae08c2c78\",\n            q: search,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page,\n            page,\n        }\n    })\n    .then(response => {\n        return response.data;\n    })\n    .catch(error => console.log(error));\n\n    return response;\n};\n\n","import { sendRequest } from \"./js/pixabay-api.js\"\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst galleryList = document.querySelector(\".gallery\");\nconst searchText = document.querySelector(\"#photo-search\");\nconst searchBtn = document.querySelector(\".search-btn\");\nconst searchForm = document.querySelector(\".search-form\");\n\nconst moreBtn = document.createElement(\"button\");\n\nmoreBtn.classList.add(\"more-search-btn\", \"btn\");\nmoreBtn.textContent = \"Load more\";\nmoreBtn.type = \"button\";\n\nconst loader = document.createElement(\"div\");\n\nloader.classList.add(\"loader\");\n\nsearchBtn.setAttribute('disabled', true);\n\nlet page;\nlet per_page = 15;\nlet maxPages;\nlet search;\n\nconst handleClick = async () => {\n    galleryList.after(loader);\n    searchForm.reset();\n    searchBtn.setAttribute('disabled', true);\n\n    const data = await sendRequest(search, page, per_page);\n    galleryCreation(data);\n};\n\nmoreBtn.addEventListener(\"click\", (e) =>{\n    e.stopPropagation();\n    e.preventDefault();\n\n    handleClick();\n});\n\nsearchForm.addEventListener('submit', (e) =>{\n    e.preventDefault();\n    removeBtn();\n    if (searchText.value.trim() !== \"\"){\n        search = searchText.value.trim();\n        page = 1;\n        handleClick();\n    }\n});\n\nconst check = (e) =>{\n    let text = e.target.value;\n    \n    if(text.trim() !== ''){\n        searchBtn.removeAttribute('disabled');\n    } else {\n        searchBtn.setAttribute('disabled', true);\n    }\n}\n  \nsearchText.addEventListener(\"input\", (e) =>{\n    e.stopPropagation();\n    e.preventDefault();\n    \n    check(e);\n});\n\n\nfunction galleryFiller(images){\n    return images.map(image => {\n        const {webformatURL: small, largeImageURL: big, tags: alt, likes, views, comments, downloads } = image;\n        return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${big}\">\n                        <img\n                        class=\"gallery-image\"\n                        src=\"${small}\"\n                        alt=\"${alt}\"\n                        />\n                    </a>\n                    <ul class=\"properties\">\n                            <li>\n                                <h5>Likes</h5>\n                                <p>${likes}</p>\n                            </li>\n                            <li>\n                                <h5>Views</h5>\n                                <p>${views}</p>\n                            </li>\n                            <li>\n                                <h5>Comments</h5>\n                                <p>${comments}</p>\n                            </li>\n                            <li>\n                                <h5>Downloads</h5>\n                                <p>${downloads}</p>\n                            </li>\n                        </ul>\n                </li>`;\n    })\n    .join(\"\");\n}\n\nfunction addButn(){\n    galleryList.after(moreBtn);\n}\n\nconst scrollPage = () => {\n    window.scrollBy({\n        top: window.innerHeight,\n        left: 0,\n        behavior: \"smooth\",\n    });\n}\n\nfunction removeBtn(){\n    moreBtn.remove();\n}\n\nfunction clearGallery() {\n    galleryList.innerHTML = \"\";\n}\n\nexport const galleryCreation = (data) => {\n    const gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: \"alt\",});\n    loader.remove();\n    const images = data.hits;\n    if (images.length === 0){\n        clearGallery();\n        iziToast.error({\n            backgroundColor: '#FFBEBE',\n            messageColor: '#fff',\n            position: 'topRight',\n            message: `Sorry, there are no images matching your search query. Please try again!`\n        })\n    } else if (page === 1){\n        maxPages = Math.ceil(data.totalHits / per_page);\n        clearGallery();\n        page += 1;\n        const markup = galleryFiller(images);\n\n        galleryList.innerHTML += markup;\n        addButn();\n        gallery.refresh();\n    } else if (page < maxPages) {\n        page += 1;\n        removeBtn();\n        const markup = galleryFiller(images);\n        galleryList.innerHTML += markup;\n        addButn();\n        scrollPage();\n\n        gallery.refresh();\n    } else if (page === maxPages){\n        page += 1;\n        removeBtn();\n        const markup = galleryFiller(images);\n        galleryList.innerHTML += markup;\n        gallery.refresh();\n        scrollPage();\n        iziToast.warning({\n            backgroundColor: '#FFBEBE',\n            messageColor: '#fff',\n            position: 'topRight',\n            message: \"We're sorry, but you've reached the end of search results.\"\n        })\n    }\n};\n"],"names":["sendRequest","search","page","per_page","axios","response","error","galleryList","searchText","searchBtn","searchForm","moreBtn","loader","maxPages","handleClick","data","galleryCreation","e","removeBtn","check","galleryFiller","images","image","small","big","alt","likes","views","comments","downloads","addButn","scrollPage","clearGallery","gallery","SimpleLightbox","iziToast","markup"],"mappings":"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"}